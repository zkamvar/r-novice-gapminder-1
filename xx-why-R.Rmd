---
layout: page
title: R for reproducible scientific analysis
subtitle: Why use R?
minutes: xx
---

```{r, include=FALSE}
library(ggplot2)
source("tools/chunk-options.R")
gapminder <- read.csv("data/gapminder-FiveYearData.csv", header=TRUE, sep=',')
```

> ### Learning Objectives {.objectives}
>
> * To get a taste of R's powerful visualisation capabilities
> * To get a taste of R's powerful statistical analysis capabilities
> * To show how interweaving those capabilities pays off
>

### Introduction to R

Welcome to the R portion of the Software Carpentry workshop. We're going to show you how R and RStudio can help you understand large data sets. We'll also guide your first steps towards using them effectively for your own work.

> ### Installation
> * Download RStudio from [http://www.rstudio.com/products/rstudio/download/](http://www.rstudio.com/products/rstudio/download/)
> * (Download gapminder data -- can we include in this repo?}
> * Once you've got RStudio installed, open it.
> * In the interactive console (left tab), type:
> * > install.packages('ggplot2')
> * and hit return, which will tell RStudio to find and install a graphics library we're going to use.
> * (what else?)
>

We're going to start with a simple but powerful example of how R can help you analyse data. In the interactive console, enter these commands (we'll explain how they work soon):

```{r}
gapminder <- read.csv("data/gapminder-FiveYearData.csv", header=TRUE, sep=',')
nrow(gapminder)
```

We told R to load a data set and tell us how big it is. 1,704 entries: that's too many to understand by reading. Let's look at the first few entries to get a better sense of what we have:

```{r}
head(gapminder)
```

Interesting: the data concerns countries, years, "pop", "lifeExp", and "gdpPercap". (The person who created the data set choose those abbreviations for "Population", "Life Expectancy", and "GDP per Capita," respectively.) Let's see if we can get a better handle on it:

```{r lifeExp-vs-gdpPercap-scatter, message=FALSE}
library(ggplot2)
ggplot(data = gapminder, aes(x = lifeExp, y = gdpPercap)) + geom_point()
```

In the lower right panel, you should see a graph that RStudio produced in response to your command. What can you tell about this data set from this initial graph?

This first graph suggests a relationship between life expectancy and GDP per capita. How can we test that idea? Continue looking at the graph. Most of the points are in a broad cluster at the bottom that sweeps upward as life expectancy increases, but

  - there are several outliers with very high GDP per capita
  - the shape of the relationship between the two factors isn't clear

Let's try squashing the influence of those high values on the Y axis:

```{r axis-scale}
ggplot(data = gapminder, aes(x = lifeExp, y = gdpPercap)) +
  geom_point() + scale_y_log10()
```

Much nicer! By using a logarithmic scale for GDP, the outliers no longer, er, lay outso drastically. Better yet, the relationship between the two factors we're graphing jumps out at us: it's logarithmic, or close.